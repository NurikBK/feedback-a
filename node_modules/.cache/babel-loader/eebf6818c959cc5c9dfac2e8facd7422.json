{"ast":null,"code":"import _slicedToArray from\"/home/nurik/react-projects/feedback-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext,useEffect}from'react';import Card from'../shared/Card';import Button from'../shared/Button';import RatingSelect from'./RatingSelect';import FeedbackContext from'../context/FeedbackContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FeedbackForm(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(10),_useState4=_slicedToArray(_useState3,2),rating=_useState4[0],setRating=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isDisabled=_useState6[0],setIsDisabled=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useContext=useContext(FeedbackContext),handleAdd=_useContext.handleAdd,feedbackEdit=_useContext.feedbackEdit,updateFeedback=_useContext.updateFeedback;useEffect(function(){if(feedbackEdit.edit){setIsDisabled(false);setText(feedbackEdit.item.text);setRating(feedbackEdit.item.rating);}},[feedbackEdit]);function handleTextChange(e){if(text===''){setIsDisabled(true);setMessage(null);}else if(text!==''&&text.trim().length<=10){setMessage('Review must be a least 10 characters');setIsDisabled(true);}else{setMessage(null);setIsDisabled(false);}setText(e.target.value);}function handleSubmit(e){e.preventDefault();if(text.trim().length>10){var newFeedback={text:text,rating:rating};if(feedbackEdit.edit){updateFeedback(feedbackEdit.item.id,newFeedback);}else{handleAdd(newFeedback);}setText('');}}return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"How would you rate your service with us\"}),/*#__PURE__*/_jsx(RatingSelect,{select:function select(rating){return setRating(rating);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:handleTextChange,type:\"text\",name:\"text\",value:text,placeholder:\"Write a review\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",isDisabled:isDisabled,children:\"Sent\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:message})]})});}export default FeedbackForm;","map":{"version":3,"names":["useState","useContext","useEffect","Card","Button","RatingSelect","FeedbackContext","FeedbackForm","text","setText","rating","setRating","isDisabled","setIsDisabled","message","setMessage","handleAdd","feedbackEdit","updateFeedback","edit","item","handleTextChange","e","trim","length","target","value","handleSubmit","preventDefault","newFeedback","id"],"sources":["/home/nurik/react-projects/feedback-app/src/components/FeedbackForm.js"],"sourcesContent":["import { useState, useContext, useEffect } from 'react';\nimport Card from '../shared/Card';\nimport Button from '../shared/Button';\nimport RatingSelect from './RatingSelect';\nimport FeedbackContext from '../context/FeedbackContext';\n\nfunction FeedbackForm() {\n  const [text, setText] = useState('');\n  const [rating, setRating] = useState(10);\n  const [isDisabled, setIsDisabled] = useState(true);\n  const [message, setMessage] = useState('');\n\n  const { handleAdd, feedbackEdit, updateFeedback } =\n    useContext(FeedbackContext);\n\n  useEffect(() => {\n    if (feedbackEdit.edit) {\n      setIsDisabled(false);\n      setText(feedbackEdit.item.text);\n      setRating(feedbackEdit.item.rating);\n    }\n  }, [feedbackEdit]);\n\n  function handleTextChange(e) {\n    if (text === '') {\n      setIsDisabled(true);\n      setMessage(null);\n    } else if (text !== '' && text.trim().length <= 10) {\n      setMessage('Review must be a least 10 characters');\n      setIsDisabled(true);\n    } else {\n      setMessage(null);\n      setIsDisabled(false);\n    }\n    setText(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    if (text.trim().length > 10) {\n      const newFeedback = {\n        text,\n        rating,\n      };\n      if (feedbackEdit.edit) {\n        updateFeedback(feedbackEdit.item.id, newFeedback);\n      } else {\n        handleAdd(newFeedback);\n      }\n\n      setText('');\n    }\n  }\n\n  return (\n    <Card>\n      <form onSubmit={handleSubmit}>\n        <h2>How would you rate your service with us</h2>\n        <RatingSelect select={(rating) => setRating(rating)} />\n        <div className=\"input-group\">\n          <input\n            onChange={handleTextChange}\n            type=\"text\"\n            name=\"text\"\n            value={text}\n            placeholder=\"Write a review\"\n          />\n          <Button type=\"submit\" isDisabled={isDisabled}>\n            Sent\n          </Button>\n        </div>\n\n        {message && <div className=\"message\">{message}</div>}\n      </form>\n    </Card>\n  );\n}\n\nexport default FeedbackForm;\n"],"mappings":"6HAAA,OAASA,QAAT,CAAmBC,UAAnB,CAA+BC,SAA/B,KAAgD,OAAhD,CACA,MAAOC,KAAP,KAAiB,gBAAjB,CACA,MAAOC,OAAP,KAAmB,kBAAnB,CACA,MAAOC,aAAP,KAAyB,gBAAzB,CACA,MAAOC,gBAAP,KAA4B,4BAA5B,C,wFAEA,QAASC,aAAT,EAAwB,CACtB,cAAwBP,QAAQ,CAAC,EAAD,CAAhC,wCAAOQ,IAAP,eAAaC,OAAb,eACA,eAA4BT,QAAQ,CAAC,EAAD,CAApC,yCAAOU,MAAP,eAAeC,SAAf,eACA,eAAoCX,QAAQ,CAAC,IAAD,CAA5C,yCAAOY,UAAP,eAAmBC,aAAnB,eACA,eAA8Bb,QAAQ,CAAC,EAAD,CAAtC,yCAAOc,OAAP,eAAgBC,UAAhB,eAEA,gBACEd,UAAU,CAACK,eAAD,CADZ,CAAQU,SAAR,aAAQA,SAAR,CAAmBC,YAAnB,aAAmBA,YAAnB,CAAiCC,cAAjC,aAAiCA,cAAjC,CAGAhB,SAAS,CAAC,UAAM,CACd,GAAIe,YAAY,CAACE,IAAjB,CAAuB,CACrBN,aAAa,CAAC,KAAD,CAAb,CACAJ,OAAO,CAACQ,YAAY,CAACG,IAAb,CAAkBZ,IAAnB,CAAP,CACAG,SAAS,CAACM,YAAY,CAACG,IAAb,CAAkBV,MAAnB,CAAT,CACD,CACF,CANQ,CAMN,CAACO,YAAD,CANM,CAAT,CAQA,QAASI,iBAAT,CAA0BC,CAA1B,CAA6B,CAC3B,GAAId,IAAI,GAAK,EAAb,CAAiB,CACfK,aAAa,CAAC,IAAD,CAAb,CACAE,UAAU,CAAC,IAAD,CAAV,CACD,CAHD,IAGO,IAAIP,IAAI,GAAK,EAAT,EAAeA,IAAI,CAACe,IAAL,GAAYC,MAAZ,EAAsB,EAAzC,CAA6C,CAClDT,UAAU,CAAC,sCAAD,CAAV,CACAF,aAAa,CAAC,IAAD,CAAb,CACD,CAHM,IAGA,CACLE,UAAU,CAAC,IAAD,CAAV,CACAF,aAAa,CAAC,KAAD,CAAb,CACD,CACDJ,OAAO,CAACa,CAAC,CAACG,MAAF,CAASC,KAAV,CAAP,CACD,CAED,QAASC,aAAT,CAAsBL,CAAtB,CAAyB,CACvBA,CAAC,CAACM,cAAF,GACA,GAAIpB,IAAI,CAACe,IAAL,GAAYC,MAAZ,CAAqB,EAAzB,CAA6B,CAC3B,GAAMK,YAAW,CAAG,CAClBrB,IAAI,CAAJA,IADkB,CAElBE,MAAM,CAANA,MAFkB,CAApB,CAIA,GAAIO,YAAY,CAACE,IAAjB,CAAuB,CACrBD,cAAc,CAACD,YAAY,CAACG,IAAb,CAAkBU,EAAnB,CAAuBD,WAAvB,CAAd,CACD,CAFD,IAEO,CACLb,SAAS,CAACa,WAAD,CAAT,CACD,CAEDpB,OAAO,CAAC,EAAD,CAAP,CACD,CACF,CAED,mBACE,KAAC,IAAD,wBACE,cAAM,QAAQ,CAAEkB,YAAhB,wBACE,+DADF,cAEE,KAAC,YAAD,EAAc,MAAM,CAAE,gBAACjB,MAAD,QAAYC,UAAS,CAACD,MAAD,CAArB,EAAtB,EAFF,cAGE,aAAK,SAAS,CAAC,aAAf,wBACE,cACE,QAAQ,CAAEW,gBADZ,CAEE,IAAI,CAAC,MAFP,CAGE,IAAI,CAAC,MAHP,CAIE,KAAK,CAAEb,IAJT,CAKE,WAAW,CAAC,gBALd,EADF,cAQE,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,CAAsB,UAAU,CAAEI,UAAlC,kBARF,GAHF,CAgBGE,OAAO,eAAI,YAAK,SAAS,CAAC,SAAf,UAA0BA,OAA1B,EAhBd,GADF,EADF,CAsBD,CAED,cAAeP,aAAf"},"metadata":{},"sourceType":"module"}